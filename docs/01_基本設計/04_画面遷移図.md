# 基本設計書：画面遷移図（MVP）

## 1. 本書の目的

本書は、MVP で提供する各画面の遷移関係（ユーザー導線）を図示し、
画面一覧（基本設計書：画面一覧）と合わせて UI 実装・API 設計の前提を揃えることを目的とする。

---

## 2. 画面遷移図（Mermaid）

```mermaid
flowchart TD
    %% =========================
    %% Home / Entry
    %% =========================
    SCR100[SCR-100\nホーム / ダッシュボード]

    %% =========================
    %% Task
    %% =========================
    SCR200[SCR-200\nタスク一覧]
    SCR201[SCR-201\nタスク詳細]
    SCR202[SCR-202\nタスク作成]
    SCR203[SCR-203\nタスク編集]

    %% =========================
    %% Event
    %% =========================
    SCR300[SCR-300\n固定予定一覧（対象日）]
    SCR301[SCR-301\n固定予定詳細]
    SCR302[SCR-302\n固定予定作成]
    SCR303[SCR-303\n固定予定編集]

    %% =========================
    %% Plan
    %% =========================
    SCR400[SCR-400\n計画一覧]
    SCR401[SCR-401\n計画生成（条件入力）]
    SCR402[SCR-402\n計画詳細（タイムライン）]
    SCR403[SCR-403\noverflow / warnings 詳細]

    %% =========================
    %% Entry links from Home
    %% =========================
    SCR100 --> SCR200
    SCR100 --> SCR300
    SCR100 --> SCR401
    SCR100 --> SCR400

    %% =========================
    %% Task transitions
    %% =========================
    SCR200 -->|詳細表示| SCR201
    SCR200 -->|新規作成| SCR202
    SCR201 -->|編集| SCR203
    SCR202 -->|作成完了| SCR200
    SCR203 -->|更新完了| SCR201
    SCR201 -->|一覧へ戻る| SCR200
    SCR203 -->|一覧へ戻る| SCR200

    %% =========================
    %% Event transitions
    %% =========================
    SCR300 -->|詳細表示| SCR301
    SCR300 -->|新規作成| SCR302
    SCR301 -->|編集| SCR303
    SCR302 -->|作成完了| SCR300
    SCR303 -->|更新完了| SCR301
    SCR301 -->|一覧へ戻る| SCR300
    SCR303 -->|一覧へ戻る| SCR300

    %% =========================
    %% Plan transitions
    %% =========================
    SCR400 -->|詳細表示| SCR402
    SCR401 -->|生成実行| SCR402
    SCR402 -->|一覧へ戻る| SCR400
    SCR402 -->|詳細確認| SCR403
    SCR403 -->|計画へ戻る| SCR402

    %% =========================
    %% Cross navigation (optional)
    %% =========================
    SCR403 -->|タスク調整へ| SCR200
    SCR403 -->|作業条件調整へ| SCR401
```

---

## 3. 遷移の補足（設計意図）

### 3.1 計画生成導線（最重要）

- SCR-401（条件入力） で対象日・作業可能時間・制約を指定し、SCR-402 に遷移する
- SCR-402 は計画の主要表示（タイムライン/リスト）を担う
- SCR-403 は overflow / warnings の詳細説明をまとめ、必要に応じて
  - タスクの調整（SCR-200）
  - 作業条件の調整（SCR-401）

へ誘導する

### 3.2 CRUD 導線

- タスク、固定予定は「一覧 → 詳細 → 編集」が基本導線
- 作成は「一覧 → 作成 → 一覧へ戻る」とする
- MVP では「作成後は一覧へ戻る」または「詳細へ遷移」は実装判断に委ねる（本図では一覧へ戻る）

### 3.3 MVP の割り切り

- 計画（Plan）の手動編集（ドラッグ＆ドロップ）は本遷移に含めない
- ブロックロック・再生成は Phase1.5 以降で追加（遷移・画面も追加予定）

---

## 4. 次工程への引き渡し

- 本遷移図を前提に、各画面に必要な API を洗い出し「API 一覧」を作成する
- 画面ごとの入力項目・表示項目は、詳細設計（画面項目定義）で確定する（必要に応じて追加）
