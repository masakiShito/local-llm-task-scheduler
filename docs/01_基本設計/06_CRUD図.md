# 基本設計書：CRUD 図（画面 × テーブル）※MVP

## 1. 本書の目的

本書は、MVP で提供する各画面が、どのテーブル（エンティティ）に対してどの CRUD 操作を行うかを
マトリクス形式で整理し、機能の漏れ・重複・責務の曖昧さを防ぐことを目的とする。

本書は「画面一覧」「画面遷移図」「ER 図」と整合する前提資料であり、
詳細設計（API 設計・画面項目定義）および実装の基準とする。

---

## 2. 記号定義

- C：Create（新規作成）
- R：Read（参照/検索/詳細取得）
- U：Update（更新/状態変更を含む）
- D：Delete（削除）

---

## 3. 対象テーブル（MVP）

本 MVP の DB テーブルは以下を対象とする。

- tasks（Task）
- events（Event）
- plans（Plan）
- plan_blocks（PlanBlock）

---

## 4. CRUD 図（画面 × テーブルのマトリクス）

| 画面 ID | 画面名                   | tasks   | events  | plans | plan_blocks |
| ------- | ------------------------ | ------- | ------- | ----- | ----------- |
| SCR-100 | ホーム / ダッシュボード  | R       | R       | R     | R           |
| SCR-200 | タスク一覧               | C/R/U/D | -       | -     | -           |
| SCR-201 | タスク詳細               | R/U     | -       | -     | -           |
| SCR-202 | タスク作成               | C       | -       | -     | -           |
| SCR-203 | タスク編集               | R/U/D   | -       | -     | -           |
| SCR-300 | 固定予定一覧（対象日）   | -       | C/R/U/D | -     | -           |
| SCR-301 | 固定予定詳細             | -       | R/U     | -     | -           |
| SCR-302 | 固定予定作成             | -       | C       | -     | -           |
| SCR-303 | 固定予定編集             | -       | R/U/D   | -     | -           |
| SCR-400 | 計画一覧                 | -       | -       | R     | -           |
| SCR-401 | 計画生成（条件入力）     | R       | R       | C     | C           |
| SCR-402 | 計画詳細（タイムライン） | -       | -       | R     | R           |
| SCR-403 | overflow / warnings 詳細 | R       | -       | R     | R           |

---

## 5. 補足（読み取りの前提）

### 5.1 ホーム画面（SCR-100）の参照

- SCR-100 はメイン導線の起点であり、最低限の一覧参照を行う
- 参照対象は画面要件により決まるため、本 CRUD 図では「参照し得る」テーブルを R として示す

### 5.2 計画生成（SCR-401）の意味

- SCR-401 は計画生成画面であり、生成結果として plans / plan_blocks が作成されるため C を持つ
- 生成に必要な入力データとして tasks / events を参照するため R を持つ

### 5.3 計画系画面（SCR-402 / SCR-403）の更新

- MVP では計画およびブロックの手動編集を行わないため、plans / plan_blocks は R のみとする
- Phase1.5 以降でロックや編集を導入する場合は、plan_blocks に U が追加される

---

## 6. 次工程への引き渡し

- 本 CRUD 図を前提に、詳細設計（API 設計）で各エンドポイントの I/O を確定する
- 画面項目定義（必要なら）を詳細設計として追加し、CRUD 図との整合を取る
- テスト方針（詳細設計）では、本 CRUD 図を観点として最低限のテストケースを整理する
