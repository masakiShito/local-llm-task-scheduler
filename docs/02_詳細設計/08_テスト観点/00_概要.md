# 詳細設計：テスト設計 概要（MVP）

## 1. 本書の目的

本書は、MVP におけるテストの観点・対象範囲・優先度を定義し、
実装品質を最低限担保しつつ、過不足のないテスト投入を行うための基準を示す。

---

## 2. テスト方針

- スケジューリングはロジックの核であるため **ユニットテストを最優先** とする
- API は **I/O・バリデーション・エラー形式** を中心にテストする
- DB 制約（FK/ON DELETE）は **結合テストで確認** する
- 画面（UI）は MVP ではスナップショット・E2E を必須にしない（必要時に追加）

---

## 3. テスト種別と対象

| 種別        | 主な目的         | 対象                                     |
| ----------- | ---------------- | ---------------------------------------- |
| Unit        | ロジックの正しさ | スケジューラ、スコアリング、空き時間生成 |
| Integration | API〜DB の整合   | CRUD、plans/generate、FK/ON DELETE       |
| Contract    | 仕様の固定化     | レスポンス形式、message_id、field_errors |
| UI（任意）  | 主要導線の担保   | 計画生成 → 表示                          |

---

## 4. テストデータ方針

- fixture を用意し、同一入力で同一結果を検証する（決定論）
- 日付・時刻はタイムゾーン付き（+09:00）で固定する
- 期待値の比較は「完全一致」より「必要項目の一致」を基本とする

---

## 5. 優先度

- P0：必須（壊れるとアプリが成立しない）
- P1：重要（品質低下に直結）
- P2：余裕があれば（回帰防止）
