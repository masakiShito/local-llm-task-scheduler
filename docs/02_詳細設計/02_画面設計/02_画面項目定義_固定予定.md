# 詳細設計：画面項目定義（固定予定）

## 1. 対象画面

- SCR-300 固定予定一覧（対象日）
- SCR-301 固定予定詳細
- SCR-302 固定予定作成
- SCR-303 固定予定編集

## 2. データ項目（Event）

| 項目     | キー        | 型       | 必須 | 備考                               |
| -------- | ----------- | -------- | ---- | ---------------------------------- |
| タイトル | title       | string   | 必須 | 最大 100 文字                      |
| 開始     | start_at    | datetime | 必須 | ISO8601（オフセット付き）          |
| 終了     | end_at      | datetime | 必須 | ISO8601（オフセット付き）          |
| ロック   | locked      | bool     | 任意 | MVP では常に true 扱い（変更不可） |
| メモ     | description | string   | 任意 | 最大 2000 文字                     |

## 3. 画面仕様

### 3.1 SCR-300 固定予定一覧（対象日）

#### 3.1.1 画面要素

- 対象日セレクタ（date picker）
- Primary「固定予定作成」
- 一覧（開始〜終了、タイトル）
- 行操作：詳細/編集

#### 3.1.2 初期表示

- 既定の対象日は「今日」（ローカルタイム）
- 一覧は start_at 昇順

#### 3.1.3 操作と API

| 操作       | トリガー          | API                         | 成功時     | 失敗時         |
| ---------- | ----------------- | --------------------------- | ---------- | -------------- |
| 一覧取得   | 画面表示/日付変更 | GET /events?date=YYYY-MM-DD | 一覧更新   | 画面上部エラー |
| 作成へ遷移 | 作成ボタン        | -                           | SCR-302 へ | -              |
| 詳細へ遷移 | 行クリック/詳細   | -                           | SCR-301 へ | -              |
| 編集へ遷移 | 編集ボタン        | -                           | SCR-303 へ | -              |

---

### 3.2 SCR-301 固定予定詳細

#### 3.2.1 表示項目

- title
- start_at / end_at
- description

#### 3.2.2 操作と API

| 操作       | トリガー   | API                    | 成功時     | 失敗時         |
| ---------- | ---------- | ---------------------- | ---------- | -------------- |
| 取得       | 画面表示   | GET /events/{event_id} | 詳細表示   | 404 は一覧導線 |
| 編集へ遷移 | 編集ボタン | -                      | SCR-303 へ | -              |

---

### 3.3 SCR-302 固定予定作成

#### 3.3.1 入力項目

- title（必須）
- start_at（必須）
- end_at（必須）
- description（任意）

#### 3.3.2 操作と API

| 操作       | トリガー          | API          | 成功時                | 失敗時                  |
| ---------- | ----------------- | ------------ | --------------------- | ----------------------- |
| 作成       | 保存（Primary）   | POST /events | トースト + SCR-300 へ | field_errors を項目直下 |
| キャンセル | 戻る（Secondary） | -            | SCR-300 へ            | -                       |

---

### 3.4 SCR-303 固定予定編集

#### 3.4.1 操作と API

| 操作     | トリガー        | API                       | 成功時                | 失敗時            |
| -------- | --------------- | ------------------------- | --------------------- | ----------------- |
| 初期取得 | 画面表示        | GET /events/{event_id}    | フォーム初期化        | エラー表示        |
| 更新     | 保存（Primary） | PATCH /events/{event_id}  | トースト + SCR-301 へ | field_errors 表示 |
| 削除     | 削除（Danger）  | DELETE /events/{event_id} | トースト + SCR-300 へ | エラー表示        |

## 4. UI バリデーション（クライアント側）

- title：必須、1〜100 文字
- start_at / end_at：必須、start_at < end_at
- 日付跨ぎ：MVP では許可（ただし計画生成で対象日外は無視しない。UI で警告を出す）
  - 推奨：UI で「同日内を推奨」注意表示

## 5. UI エラー表示ルール

- 400：field_errors を項目直下、全体は画面上部
- 404：詳細/編集は一覧へ戻る導線を提示
- 500：画面上部に表示し再試行導線
