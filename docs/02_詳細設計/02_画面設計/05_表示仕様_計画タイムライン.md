# 詳細設計：表示仕様（計画タイムライン）

## 1. 本書の目的

本書は、計画詳細画面（SCR-402）におけるタイムライン表示の仕様を定義し、視認性と一貫性を担保する。

## 2. 表示対象

- PlanBlock.kind = work / break / buffer

## 3. タイムライン表示仕様

### 3.1 時間表記

- 表示はローカルタイム（timezone）で行う
- 表示形式：`HH:mm`（例：09:00）

### 3.2 ブロック表示（共通）

- 表示要素
  - 開始〜終了（HH:mm - HH:mm）
  - 種別ラベル（work/break/buffer）
  - タイトル（work はタスク名、break/buffer は固定文言）
  - 補足（work は estimate_minutes 等、任意）

### 3.3 種別ごとの表示文言

- work：タスクタイトルを表示する
- break：文言「休憩」
- buffer：文言「バッファ」

## 4. タスク名の解決

- 推奨：GET /plans/{plan_id}/blocks が work ブロックに taskTitle を同梱する
- 代替：task_id を用いて別途 tasks を参照する（MVP では避ける）

## 5. warnings / overflow の表示

### 5.1 warnings

- タイムライン上部または下部に専用セクションを設ける
- 表示は箇条書き
- 重要度は Warning カラーで表現する（画面標準仕様）

### 5.2 overflow

- タイムライン上部または下部に専用セクションを設ける
- 表示項目
  - タスクタイトル
  - estimate_minutes
  - due_at（任意）
  - reason（コードまたは文言）
- overflow が存在する場合は SCR-403 への導線を表示する

## 6. LLM summary の表示

- summary が null の場合は表示しない
- 表示する場合
  - summary.summary（文章）
  - summary.why_this_order（箇条書き）
  - summary.warnings（箇条書き）
  - summary.overflow_plan（タスク単位の提案）

## 7. 画面内の優先順位

- 1：タイムライン（blocks）
- 2：warnings / overflow
- 3：LLM summary（補足）

## 8. 禁止事項

- overflow をエラー（Danger）として扱わない
- LLM 失敗を致命的エラーとして扱わない（warnings に含める）
