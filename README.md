# Task Scheduler App (Local LLM)

「普通の Todo」と「計画タスク（工数・期限・優先度）」を統合し、  
**その日の空き時間に対して実行可能なスケジュール案（時間割）を自動生成する**  
タスク管理アプリです。

---

## コンセプト

### AI に最適化を丸投げしない

- スケジューリングは **決定論的なロジック** で実行
- 同じ入力からは常に同じ結果が得られる

### LLM は“補助役”

- 計画の説明生成
- overflow（入りきらなかったタスク）の理由整理
- ユーザーに伝わる自然言語化のみを担当

### 勝手に決めない設計

- 出力はあくまで「提案」
- ユーザーが最終判断する前提
- 破綻時は理由と代替案を必ず提示

---

## 主な機能（MVP）

- タスク管理
  - Todo / Task の登録・更新・削除
  - 工数・期限・優先度・分割可否の管理
- 固定予定管理
  - 会議・外出などの作業不可時間を登録
- スケジュール自動生成
  - 対象日の空き時間を算出
  - 優先度・期限・工数に基づいてタスクを割当
  - 休憩・バッファを自動挿入
- 生成結果の可視化
  - 時間割（PlanBlock）
  - overflow / warnings
  - 計画の説明（LLM）

---

## 技術スタック

| レイヤ     | 技術                  |
| ---------- | --------------------- |
| Frontend   | Next.js               |
| Backend    | FastAPI               |
| Database   | PostgreSQL            |
| LLM        | Ollama（Local LLM）   |
| Scheduling | Greedy + ルールベース |

---

## アーキテクチャ方針

- フロントエンドとバックエンドを明確に分離
- API はすべて設計書ベースで実装
- LLM 出力は **JSON スキーマ固定**
- 計画生成結果（Plan）は必ず保存し、再現性を担保

---

## 設計の特徴

- 要件定義 → 基本設計 → 詳細設計 を明確に分離
- CRUD 図・画面-API 対応・スケジューリング仕様まで文書化
- エラー／警告は message_id による制御
- トランザクション境界・永続化順序を明示

---

## ディレクトリ構成（抜粋）

```plaintext
docs/
  00_要件定義/
  01_基本設計/
  02_詳細設計/
    03_API設計/
    04_スケジューリング/
    05_バリデーション/
    06_エラー仕様/
    07_永続化・トランザクション/
    08_テスト設計/
apps/
  web/  # Next.js
  api/  # FastAPI
```

---

## ステータス

- 要件定義・基本設計・詳細設計：完了
- 実装：これから
- MVP 完成後、Phase2 として以下を検討
  - 再生成・ロック
  - 週単位最適化
  - Google カレンダー連携
  - 実績学習

---

## このプロジェクトで伝えたいこと

- **AI を使いすぎない設計**
- 再現性・テスト可能性を重視したスケジューリング
- LLM とロジックの責務分離

「AI スケジューラ」ではなく、  
**“設計されたスケジューラに AI を添える”** プロジェクトです。
